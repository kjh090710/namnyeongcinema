{% extends "base.html" %}
{% block content %}
<section class="stack mt-24">
  <div class="stack mb-16">
    <p class="h-eyebrow">ê´€ë¦¬</p>
    <h1 class="h-title-xxl">ğŸ¬ ì˜í™” ê´€ë¦¬</h1>
    <p class="text-muted">ìƒì˜ì‘ì„ ì¶”ê°€Â·ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
  </div>

  <!-- ì¶”ê°€ í¼ -->
  <form method="post" action="{{ url_for('admin_movies_new') }}" class="card stack" style="gap:12px">
    <div class="stack">
      <label class="k" style="font-weight:700">ì œëª©</label>
      <input class="input" name="title" placeholder="ì˜ˆ: ì¸í„°ìŠ¤í…”ë¼">
    </div>
    <div class="stack">
      <label class="k" style="font-weight:700">ê´€ëŒë“±ê¸‰</label>
      <input class="input" name="rating" placeholder="ì˜ˆ: 12ì„¸ ì´ìƒ ê´€ëŒê°€ (ê¸°ë³¸: ALL)">
    </div>
    <div class="stack">
      <label class="k" style="font-weight:700">ì¥ë¥´</label>
      <input class="input" name="genre" placeholder="ì˜ˆ: SF / ë“œë¼ë§ˆ (ê¸°ë³¸: ê¸°íƒ€)">
    </div>
    <div class="stack">
      <label class="k" style="font-weight:700">ìƒì˜ì‹œê°„(ë¶„)</label>
      <input class="input" name="duration" type="number" placeholder="ì˜ˆ: 169 (ê¸°ë³¸: 90)">
    </div>
    <div class="stack">
      <label class="k" style="font-weight:700">í¬ìŠ¤í„° URL</label>
      <input class="input" name="poster" placeholder="ì˜ˆ: https://... í˜¹ì€ /static/images/posters/m002.jpg">
    </div>
    <button class="btn btn-primary">ì˜í™” ì¶”ê°€</button>
  </form>

  <!-- ëª©ë¡ -->
  <div class="card">
    <table class="table" style="width:100%;border-collapse:collapse">
      <thead>
        <tr>
          <th style="text-align:left;padding:10px">ID</th>
          <th style="text-align:left;padding:10px">ì œëª©</th>
          <th style="text-align:left;padding:10px">ë“±ê¸‰</th>
          <th style="text-align:left;padding:10px">ì¥ë¥´</th>
          <th style="text-align:left;padding:10px">ìƒì˜ì‹œê°„</th>
          <th style="text-align:left;padding:10px">í¬ìŠ¤í„°</th>
          <th style="text-align:left;padding:10px">ì‘ì—…</th>
        </tr>
      </thead>
      <tbody>
        {% for m in db_movies %}
        <tr style="border-top:1px solid var(--border)">
          <td style="padding:10px">{{ m['id'] }}</td>
          <td style="padding:10px">{{ m['title'] }}</td>
          <td style="padding:10px">{{ m['rating'] or '-' }}</td>
          <td style="padding:10px">{{ m['genre'] or '-' }}</td>
          <td style="padding:10px">{{ m['duration'] or '-' }}</td>
          <td style="padding:10px">
            {% set poster = m['poster'] or '/static/images/posters/default.jpg' %}
            <img class="poster" src="{{ poster }}" alt="" style="max-width:120px">
          </td>
          <td style="padding:10px">
            <form method="post" action="{{ url_for('admin_movies_delete', mid=m['id']) }}"
                  onsubmit="return confirm('ì •ë§ ì‚­ì œí• ê¹Œìš”?')" style="display:inline">
              <button class="btn btn-soft">ì‚­ì œ</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</section>
{% endblock %}
